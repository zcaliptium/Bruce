#ifndef __ESP_FILE_SHARING_H__
#define __ESP_FILE_SHARING_H__

#include "esp_connection.h"

class FileSharing : public EspConnection {
public:
    enum AppMode {
        APP_MODE_FILESEND,
        APP_MODE_FILERECV,
    };

    /////////////////////////////////////////////////////////////////////////////////////
    // Constructor
    /////////////////////////////////////////////////////////////////////////////////////
    FileSharing();

    /////////////////////////////////////////////////////////////////////////////////////
    // Operations
    /////////////////////////////////////////////////////////////////////////////////////
    void sendFile();
    void receiveFile();

private:
    String rxFileName;

    /////////////////////////////////////////////////////////////////////////////////////
    // Helpers
    /////////////////////////////////////////////////////////////////////////////////////
    File selectFile();
    bool appendToFile(Message fileMessage);
    void createFilename(FS *fs, Message fileMessage);

    void displayBanner(AppMode mode);
};

#endif
